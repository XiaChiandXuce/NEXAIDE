# 通义千问API集成测试指南

## 🚀 API集成状态

✅ **已完成**: 通义千问API集成  
✅ **模型**: qwen-max-2025-01-25  
✅ **API密钥**: 已配置  
✅ **错误处理**: 完善的网络和API错误处理  
✅ **打字指示器**: 显示AI思考状态  

## 🧪 测试步骤

### 1. 启动插件
```bash
# 编译插件
npm run compile

# 启动VS Code扩展开发模式
code --extensionDevelopmentPath="D:\TYHProjectLibrary\AICcompiler\NEXAIDE\NEXAIDE-Plugin\nexaide"
```

### 2. 测试基本对话
在新的VS Code窗口中：
1. 打开侧边栏的NEXAIDE图标
2. 确认模型选择器显示"通义千问 Max"、"通义千问 Plus"、"通义千问 Turbo"选项，默认选择"通义千问 Max"
3. 输入测试消息："你好，请介绍一下你自己"
4. 观察打字指示器显示
5. 等待AI响应

### 3. 测试编程功能
测试以下编程相关问题：
- "请解释JavaScript的闭包概念"
- "如何优化这段Python代码？"
- "帮我生成一个React组件"
- "调试这个函数的问题"

### 4. 测试文件附加
1. 点击📎按钮
2. 选择一个代码文件
3. 询问AI关于该文件的问题

### 5. 测试快速操作
1. 选择一段代码
2. 使用快速操作按钮：
   - 🔍 解释代码
   - ⚡ 优化代码
   - 🐛 调试代码
   - 🧪 生成测试

## 🔧 API配置详情

```typescript
// API配置
const apiConfig = {
  url: 'https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions',
  model: 'qwen-max-2025-01-25',
  temperature: 1,
  max_tokens: 8192,
  timeout: 60000
};
```

## ⚠️ 错误处理

插件包含以下错误处理机制：
- **网络错误**: 显示连接失败提示
- **API错误**: 显示具体API错误信息
- **超时错误**: 60秒超时保护
- **解析错误**: JSON响应解析错误处理

## 📊 预期行为

### 正常流程
1. 用户输入消息
2. 显示打字指示器（三个跳动的点）
3. 发送请求到通义千问API
4. 隐藏打字指示器
5. 显示AI响应

### 错误流程
1. 用户输入消息
2. 显示打字指示器
3. API请求失败
4. 隐藏打字指示器
5. 显示错误消息

## 🎯 测试重点

- [ ] **模型选择器显示通义千问的三个模型选项（Max、Plus、Turbo）**
- [ ] 默认选择"通义千问 Max"
- [ ] 模型切换功能正常工作
- [ ] API连接正常
- [ ] 响应内容准确
- [ ] 打字指示器工作
- [ ] 错误处理完善
- [ ] 界面响应流畅
- [ ] 代码高亮正确
- [ ] 文件附加功能
- [ ] 快速操作按钮

## 📝 注意事项

1. **API密钥安全**: 生产环境中应使用配置文件或环境变量
2. **网络依赖**: 需要稳定的网络连接
3. **响应时间**: 通常在2-5秒内响应
4. **令牌限制**: 单次请求最大8192令牌

---

**测试完成后，插件应能提供流畅的AI编程助手体验！** 🎉